---
:logger: console
:backends:
<%- if @gpg -%>
  - gpg
<%- end -%>
  - yaml
:hierarchy:
  - "defaults_pass"
  - "defaults"
  - "node/%{::clientcert}_pass"
  - "node/%{::clientcert}"
  - "data_centre/%{::data_centre}_pass"
  - "data_centre/%{::data_centre}"
  - "env/%{::environment}_pass"
  - "env/%{::environment}"
  - "global_pass"
  - "global"

<%- if @gpg -%>
:gpg:
  :key_dir: /etc/puppet/keys
  :datadir: "<%= @hiera_gpg_path %>"
<%- end -%>

:yaml:
  :datadir: "<%= @hiera_yaml_path %>"
