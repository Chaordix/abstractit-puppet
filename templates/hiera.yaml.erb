---
:logger: console
:backends:
<%- if @gpg -%>
  - gpg
<%- end -%>
<%- if @eyaml -%>
  - eyaml
<%- end -%>
  - yaml
:hierarchy:
  - "defaults.pass"
  - "defaults"
  - "node/%{::data_centre}/%{::clientcert}.pass"
  - "node/%{::data_centre}/%{::clientcert}"
  - "node/%{::clientcert}.pass"
  - "node/%{::clientcert}"
  - "data_centre/%{::data_centre}.pass"
  - "data_centre/%{::data_centre}"
  - "env/%{::environment}.pass"
  - "env/%{::environment}"
  - "global.pass"
  - "global"

<%- if @gpg -%>
:gpg:
  :key_dir: /etc/puppet/keys
  :datadir: "<%= @hiera_gpg_path %>"
<%- end -%>

<%- if @eyaml -%>
:eyaml:
  :datadir: "<%= @hiera_eyaml_path %>"
  :pkcs7_private_key: /etc/puppet/keys/eyaml/private_key.pkcs7.pem
  :pkcs7_public_key:  /etc/puppet/keys/eyaml/public_key.pkcs7.pem
<%- end -%>

:yaml:
  :datadir: "<%= @hiera_yaml_path %>"
